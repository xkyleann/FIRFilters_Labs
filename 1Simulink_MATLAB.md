# Simulink Experiments in Matlab

## Introduction

Lab involves utilizing Simulink within the Matlab environment, a staple tool in science and engineering. Simulink facilitates the precise modeling of real systems' behavior when used appropriately. We will be incorporating various toolboxes including the Communications System Toolbox, DSP System Toolbox, and Signal Processing Toolbox.


### Task 1: Building a Basic Block Diagram Using Simulink

1. **Start Matlab** and either type `simulink` in the command window or click the Simulink icon on the toolbar.
2. **Open a Blank Model** and access the Library Browser.
3. **Locate the Sine Wave block** within the DSP System Toolbox, *not* the basic Simulink toolbox (refer to Fig. 1). Right-click this block and select "Add block to model".
4. **Find the Scope** in the basic Simulink toolbox (avoid the DSP Toolbox version). Connect the Sine Wave block to the Scope using your mouse. The resulting schematic is shown in Figure 1.

5. **Configure the Sine Wave block**:
   - Double-click the block to set the frequency at `2e3` (2 kHz).
   - Set the sampling frequency to 100 kHz by adjusting the Sample Time parameter to `1/100e3`.


6. **Set the simulation time** to `1e-3` (1 ms) and run the simulation.
7. **View the waveform** on the Scope, which should resemble Figure 3.

    

8. **Modify the Phase offset** in the Sine Wave generator to `pi/2` to observe a cosine wave.
9. **Reduce the sampling frequency** to 10 kHz and examine the waveform on the scope.
10. **Add a Spectrum Analyzer** from the DSP System Toolbox to your schematic as shown in Figure 4. Increase the simulation time to 1 second and observe the spectrum. Adjust the Spectrum Analyzer settings to inherit the sample rate and apply the Welch method for a one-sided spectrum.



### Task 2: Frequency Conversion

1. **Understand frequency conversion** typically used in wireless systems to alter the signal frequency for transmission or reception.
2. **Use two sinusoidal generators** at 1.5 kHz and 2 kHz, connecting them to a Product block for multiplication. The resulting schematic is shown in Figure 5.



3. **Repeat the experiment** with higher frequency signals (30 MHz and 40 MHz) and a higher sampling frequency (200 MHz).

### Task 3: Pseudo-random Binary Sequences

1. **Generate an m-sequence** using 3 shift registers. View this in the time domain using the same Scope from the Simulink library. The PN Sequence Generator should be configured with a Generator polynomial 'z^3+z^2+1' or `[3 2 0]`. Initialize the registers with `[1 1 1]`.
2. **Set the bit rate** using the Sample Time parameter to achieve 100 kbit/s.
3. **Run a longer simulation** for a sequence generated by 7 registers to examine the extended repetition of the sequence.
4. **Add a Unipolar to Bipolar Converter** after the PN Sequence Generator to convert the output signal.
5. **Analyze the spectrum** of the pseudorandom sequence using a Spectrum Analyzer, ensuring to configure the Sample rate and Method appropriately. If necessary, use a Repeat block to increase the sample rate.

---


# - Results

## Section 1: Building a very simple block diagram using Simulink
<img width="1022" alt="Ekran Resmi 2024-04-26 01 08 27" src="https://github.com/xkyleann/FIRFilters_Labs/assets/128597547/c1f8a862-491b-4bc8-8e47-d3c3bc1e7a77">
<img width="991" alt="Ekran Resmi 2024-04-26 01 09 56" src="https://github.com/xkyleann/FIRFilters_Labs/assets/128597547/c45cd1bc-655b-445f-a9b2-d07eb9cdaf94">



## Section 2: Frequency conversion 
####  **1.5 kHz and 2 kHz Scope Result**
<img width="941" alt="Ekran Resmi 2024-04-26 01 02 43" src="https://github.com/xkyleann/FIRFilters_Labs/assets/128597547/a85039be-a681-4bee-a424-2b7364eb4351">

####  **1.5 kHz and 2 kHz Spectrum Analyzer Result**
<img width="1063" alt="Ekran Resmi 2024-04-26 01 03 32" src="https://github.com/xkyleann/FIRFilters_Labs/assets/128597547/089acc0c-4fe4-40c4-b598-63a5edb0ed6b">

####  **30 MHz and 40 MHz Scope Results**
<img width="900" alt="Ekran Resmi 2024-04-26 01 06 23" src="https://github.com/xkyleann/FIRFilters_Labs/assets/128597547/f73b82e5-d8c3-4dc4-82c0-1bac02149705">

## Section 3: Pseudo-random binary sequences - Results
####  **Pseudo-random Binary Sequence (PRBS) with a 3-bit Shift**
<img width="1250" alt="Ekran Resmi 2024-04-26 00 45 44" src="https://github.com/xkyleann/FIRFilters_Labs/assets/128597547/31674cb2-1013-41d3-ae91-48b7140bf8bc">

####  **Pseudo-random Binary Sequence (PRBS) with a 7-bit Shift**
<img width="1214" alt="Ekran Resmi 2024-04-26 00 50 40" src="https://github.com/xkyleann/FIRFilters_Labs/assets/128597547/dcde0b11-d613-460e-984b-f77dfbba457b">

####  **Pseudo-random Binary Sequence (PRBS) with a 7-bit Shift Spectrum Analyzer Added**
<img width="1240" alt="Ekran Resmi 2024-04-26 00 54 21" src="https://github.com/xkyleann/FIRFilters_Labs/assets/128597547/d30532d6-ad00-4e9e-8b54-1c6ac4369b1e">

####  **Pseudo-random Binary Sequence (PRBS) with a 7-bit Shift Spectrum Analyzer and Repeat Added**
<img width="1329" alt="Ekran Resmi 2024-04-26 00 58 29" src="https://github.com/xkyleann/FIRFilters_Labs/assets/128597547/afc210b7-3e9b-4563-9f4e-0240107ec0cf">



Throughout the execution of Task 3,  delved into the generation and analysis of pseudo-random binary sequences (PRBS) within a Simulink model. By employing linear feedback shift registers (LFSRs), configured with generator polynomials for 3 and 7-bit shift registers (`'z^3+z^2+1'` and `'z^7+z^6+1'`, respectively), we effectively created maximum-length sequences, which showcased the expected properties of randomness and sequence length.

The first sequence, generated using a 3-register setup with an initial state of `[1 1 1]`, complied with theoretical predictions, producing the sequence `'1110100'` within a simulation time frame of 0.3 milliseconds. Expanding the shift register count to 7 registers corroborated the extended length of the resulting sequence, affirming the formula \( 2^n - 1 \) for the sequence length, which in our case was \( 2^7 - 1 \).

The integration of a Unipolar to Bipolar Converter was instrumental, converting the unipolar sequence output to a bipolar format. This step proved pivotal before performing spectral analysis, as it mirrored the bipolar signal's theoretical spectral characteristics.

Incorporating a Repeat block into the signal path allowed for an effective increase in the sample rate, satisfying the Spectrum Analyzer's prerequisite for a minimum sample count, necessary for a precise spectral display. This adjustment was crucial to observe the frequency spectrum up to 1 MHz, ensuring that the spectrum analysis was feasible within the designated 40 milliseconds of simulation time.

Utilizing Welch’s method for spectrum estimation, combined with a Running average, we achieved a clear visualization of the signal’s power spectral density over its frequency components.

In conclusion, Task 3 has been a concrete demonstration of PRBS's practical application in the realms of digital communications and signal processing. The obtained results not only conformed to theoretical expectations but also emphasized the adaptability and precision of Simulink as a simulation tool for intricate digital communication systems.
